#include <iostream>
#include <string>
#include <bits/stdc++.h>
#include <Windows.h>
#include <unistd.h>
#include <cstdlib>

using namespace std;


void clearscreen()
{
    HANDLE hOut;
    COORD Position;

    hOut = GetStdHandle(STD_OUTPUT_HANDLE);

    Position.X = 0;
    Position.Y = 0;
    SetConsoleCursorPosition(hOut, Position);
}

int main() {

    string particle = "O";

    int pos_x = 4;
    int pos_y = 4;

    int x_vel = 1;
    int y_vel = 1;

    string map[20][51] = {
        {"   #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", ""},                                                     // 1
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 2
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 3
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 4
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 5
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 6
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 7
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 8
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 9
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 10
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 11
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 12
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 13
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 14
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 15
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 16
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 17
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 18
        {"   #", "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  "  ",  " #", ""},     // 19
        {"   #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", " #", ""}                                                      // 20
    };

    map[pos_y][pos_x] = particle + " ";

    for (int i = 0; i < 20; i++) {
      for (int n = 0; n < 51; n++) {
        cout << map[i][n];
      }
      cout << "\n";
    }

    // == START OF ALGORITHM == //
    while (true) {

        if (pos_y == 1 || pos_y == 18) {
            y_vel = y_vel * -1;
        }

        if (pos_x == 1 || pos_x == 48) {
            x_vel = x_vel * -1;
        }

        pos_x = pos_x + x_vel;
        pos_y = pos_y + y_vel;

        if (pos_x == 49) {
            map[pos_y][pos_x] = particle;
        } else {
            map[pos_y][pos_x] = particle + "";
        }

        if (y_vel > 0 && x_vel > 0) {
            if (pos_y != 1 || pos_y != 19) {
                map[pos_y-1][pos_x-1] = "  ";
            }
        }
        if (y_vel < 0 && x_vel < 0) {
            if (pos_y != 1 || pos_y != 19 ) {
                map[pos_y+1][pos_x+1] = "  ";
            }
        }

        if (y_vel < 0 && x_vel > 0) {
            if (pos_y != 1 || pos_y != 19) {
                if (pos_x != 49) {
                    map[pos_y+1][pos_x-1] = "  ";
                }
            }
        }
        if (y_vel > 0 && x_vel < 0) {
            if (pos_y != 1 || pos_y != 19) {
                if (pos_x != 49) {
                    map[pos_y-1][pos_x+1] = "  ";
                }
            }
        }

        sleep(0.1);

        clearscreen();


        for (int i = 0; i < 20; i++) {
          for (int n = 0; n < 51; n++) {
            cout << map[i][n];
          }
          cout << "\n";
        }

    }
    // == END OF ALGORITHM == //
}
